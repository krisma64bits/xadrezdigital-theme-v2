/**
 * ========================================
 * PRODUCT SECTION (CARD STYLE)
 * Estiliza upsells/related mantendo markup original do WooCommerce
 * Design tokens: stone-50 (bg), stone-100 (header), stone-200 (border)
 * ========================================
 */

/* ========================================
 * CONTAINER DA SEÇÃO
 * ======================================== */
.xd-product-section {
    @apply bg-white border border-stone-200 rounded-lg overflow-hidden;
}

/* Título h2 - simula header das tabs */
.xd-product-section>h2 {
    @apply px-4 py-3 m-0 text-base font-semibold text-stone-900 bg-stone-100;
}

/* ========================================
 * GRID DE PRODUTOS
 * ======================================== */

/* Reset para sobrescrever WooCommerce - usando seletores de alta especificidade */
.woocommerce .xd-product-section.products ul.products,
.woocommerce-page .xd-product-section.products ul.products,
section.xd-product-section>ul.products {
    @apply !grid !grid-cols-2 !gap-6 !m-0 !p-6 !list-none !border-t !border-stone-200 !float-none !w-full;
}

/* Remove pseudo-elementos do WooCommerce */
.woocommerce .xd-product-section.products ul.products::before,
.woocommerce .xd-product-section.products ul.products::after,
.woocommerce-page .xd-product-section.products ul.products::before,
.woocommerce-page .xd-product-section.products ul.products::after,
section.xd-product-section>ul.products::before,
section.xd-product-section>ul.products::after {
    @apply !hidden !content-none;
}

/* ========================================
 * CARD DE PRODUTO INDIVIDUAL
 * Estrutura: imagem → título → preço → botão (todos alinhados)
 * ======================================== */
.woocommerce .xd-product-section.products ul.products li.product,
.woocommerce-page .xd-product-section.products ul.products li.product,
section.xd-product-section>ul.products li.product {
    @apply !float-none !w-auto !m-0 !p-0 !flex !flex-col;
}

/* Link wrapper - apenas flex-col sem flex-1 para evitar expansão */
.xd-product-section ul.products li.product>a {
    @apply flex flex-col no-underline relative;
}

/* Imagem do produto - centralizada */
.xd-product-section ul.products li.product img {
    @apply w-full h-auto object-contain rounded-md mb-3;
}

/* Badge de oferta - sobrescreve estilos circulares do WooCommerce */
.xd-product-section ul.products li.product .onsale {
    @apply !absolute !top-2 !right-2 !left-auto !m-0 !p-0;
    @apply !bg-emerald-600 !text-white !text-xs !font-semibold !px-2 !py-1;
    @apply !rounded-md !min-h-0 !min-w-0 !w-auto !h-auto !z-10;
    @apply !leading-normal !text-center;
}

/* Título do produto - altura fixa para alinhar (3 linhas) */
.xd-product-section ul.products li.product .woocommerce-loop-product__title {
    @apply text-sm font-medium text-stone-900 leading-tight mb-2 line-clamp-3 min-h-12;
}

/* Preço */
.xd-product-section ul.products li.product .price {
    @apply text-sm text-stone-700 mb-3;
}

/* Preço antigo (riscado) */
.xd-product-section ul.products li.product .price del {
    @apply text-stone-400 mr-2;
}

/* Preço atual (promocional) */
.xd-product-section ul.products li.product .price ins {
    @apply text-amber-600 font-semibold no-underline;
}

/* ========================================
 * BOTÃO ADICIONAR AO CARRINHO
 * ======================================== */
.xd-product-section ul.products li.product .button {
    @apply w-full mt-auto inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors;
    @apply border border-stone-200 bg-transparent text-stone-900 shadow-sm;
}

.xd-product-section ul.products li.product .button:hover {
    @apply bg-stone-100;
}

/* Estado loading - mostra spinner centralizado */
.xd-product-section ul.products li.product .button.loading {
    @apply relative text-transparent pointer-events-none;
}

/* Spinner customizado */
.xd-product-section ul.products li.product .button.loading::after {
    @apply !block absolute inset-0 m-auto w-5 h-5 border-2 border-stone-300 border-t-stone-700 rounded-full animate-spin;
    content: "" !important;
}

/* Estado "added" - esconde checkmark */
.xd-product-section ul.products li.product .button.added::after {
    @apply !hidden;
}

/* Link "Ver carrinho" - esconde */
.xd-product-section ul.products li.product .added_to_cart {
    @apply !hidden;
}

/* ========================================
 * RESPONSIVO
 * ======================================== */

/* md: 3 colunas */
@media (min-width: 768px) {

    .woocommerce .xd-product-section.products ul.products,
    .woocommerce-page .xd-product-section.products ul.products,
    section.xd-product-section>ul.products {
        @apply !grid-cols-3;
    }
}

/* lg: 4 colunas */
@media (min-width: 1024px) {

    .woocommerce .xd-product-section.products ul.products,
    .woocommerce-page .xd-product-section.products ul.products,
    section.xd-product-section>ul.products {
        @apply !grid-cols-4;
    }
}